import{u as y,j as r,c as n,a,m as g,g as k,p as u,v as m,n as c,t as d,k as V,o as v}from"./index-BRLyiLg5.js";const h={class:"row justify-content-center"},x={class:"col-md-5"},A={class:"card"},E={class:"card-body"},S={class:"mb-3"},j={class:"invalid-feedback"},z={class:"mb-3"},B={class:"invalid-feedback"},L={key:0,class:"alert alert-danger mt-3"},M={__name:"Login",setup(C){const p=V(),f=y(),l=r({email:"",password:""}),o=r({}),t=r(""),w=()=>{o.value={};let s=!0;return l.value.email?b(l.value.email)||(o.value.email="邮箱格式不正确",s=!1):(o.value.email="邮箱不能为空",s=!1),l.value.password||(o.value.password="密码不能为空",s=!1),s},b=s=>/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z0-9-]+\.)+[a-zA-Z]{2,}))$/.test(s),_=async()=>{if(t.value="",w()){const s=await f.login(l.value.email,l.value.password);if(s&&s.success)p.push("/");else{const e=s!=null&&s.code?`(${s.code}) `:"";t.value=e+((s==null?void 0:s.message)||"无效的邮箱或密码")}}};return(s,e)=>(v(),n("div",h,[a("div",x,[a("div",A,[e[5]||(e[5]=a("div",{class:"card-header d-flex justify-content-center"},[a("h3",null,"Login")],-1)),a("div",E,[a("form",{onSubmit:g(_,["prevent"])},[a("div",S,[e[2]||(e[2]=a("label",{for:"email",class:"form-label"},"Email Address",-1)),u(a("input",{type:"email",class:c(["form-control",{"is-invalid":o.value.email}]),id:"email","onUpdate:modelValue":e[0]||(e[0]=i=>l.value.email=i)},null,2),[[m,l.value.email]]),a("div",j,d(o.value.email),1)]),a("div",z,[e[3]||(e[3]=a("label",{for:"password",class:"form-label"},"Password",-1)),u(a("input",{type:"password",class:c(["form-control",{"is-invalid":o.value.password}]),id:"password","onUpdate:modelValue":e[1]||(e[1]=i=>l.value.password=i)},null,2),[[m,l.value.password]]),a("div",B,d(o.value.password),1)]),e[4]||(e[4]=a("button",{type:"submit",class:"btn btn-primary w-100"},"Login",-1)),t.value?(v(),n("div",L,d(t.value),1)):k("",!0)],32)])])])]))}};export{M as default};
