import{_ as $,u as L,j as n,e as Z,q as j,c as b,a as s,m as q,g as x,p as c,v as p,n as d,t as i,s as F,x as T,h as V,b as D,w as H,r as I,k as W,o as h}from"./index-BRLyiLg5.js";const G={class:"row justify-content-center"},J={class:"col-md-6"},K={class:"card"},O={class:"card-body"},Q={class:"mb-3"},X={class:"invalid-feedback"},Y={class:"mb-3"},ee={class:"invalid-feedback"},se={class:"mb-3"},ae={class:"invalid-feedback"},le={class:"mb-3"},oe={class:"invalid-feedback"},te={key:0,class:"mt-2"},re={class:"progress",style:{height:"5px"}},ne={class:"text-muted"},ie={class:"mb-3"},ue={class:"invalid-feedback"},de={key:0,class:"alert alert-danger mt-3"},ve={class:"mt-3 text-center"},me={__name:"Register",setup(ce){const A=W(),C=L(),o=n({name:"",email:"",password:"",confirmPassword:"",role:""}),a=n({name:null,email:null,password:null,confirmPassword:null,role:null}),v=n(""),u=n(""),w=n(0),f=n(""),B=Z(()=>{switch(u.value){case"weak":return"Weak password";case"medium":return"Medium password";case"strong":return"Strong password!";default:return""}});j(()=>o.value.password,l=>{N(l)});const N=l=>{if(!l){u.value="",w.value=0;return}let e=0;const m=l.length>=6,t=/[A-Z]/.test(l),r=/[a-z]/.test(l),M=/[0-9]/.test(l),R=/[^A-Za-z0-9]/.test(l);m&&(e+=25),t&&(e+=25),r&&(e+=25),M&&(e+=15),R&&(e+=10),e=Math.min(e,100),w.value=e,e<50?(u.value="weak",f.value="bg-danger"):e<80?(u.value="medium",f.value="bg-warning"):(u.value="strong",f.value="bg-success")},z=l=>/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z0-9-]+\.)+[a-zA-Z]{2,}))$/.test(l),P=()=>{o.value.name.trim()?a.value.name=null:a.value.name="Name is required"},y=()=>{o.value.email?z(o.value.email)?a.value.email=null:a.value.email="Email is invalid":a.value.email="Email is required"},_=()=>{o.value.role?a.value.role=null:a.value.role="Please select your role"},k=()=>{const l=o.value.password;if(!l){a.value.password="Password is required";return}const e=6,m=/[A-Z]/.test(l),t=/[a-z]/.test(l),r=[];l.length<e&&r.push(`at least ${e} characters`),m||r.push("one uppercase letter"),t||r.push("one lowercase letter"),r.length>0?a.value.password=`Password must contain: ${r.join(", ")}`:a.value.password=null},S=()=>{o.value.confirmPassword?o.value.password!==o.value.confirmPassword?a.value.confirmPassword="Passwords do not match":a.value.confirmPassword=null:a.value.confirmPassword="Please confirm your password"},E=()=>(P(),y(),k(),S(),_(),!a.value.name&&!a.value.email&&!a.value.password&&!a.value.confirmPassword&&!a.value.role),g=n(!1),U=async()=>{if(!g.value)if(E()){g.value=!0;try{const l=await C.register(o.value);l!=null&&l.success?A.push("/"):v.value=l.message||"Registration failed"}catch(l){v.value=l.message}finally{g.value=!1}}else v.value="Please check and correct the errors in the form."};return(l,e)=>{const m=I("router-link");return h(),b("div",G,[s("div",J,[s("div",K,[e[17]||(e[17]=s("div",{class:"card-header d-flex justify-content-center"},[s("h3",null,"Create Account")],-1)),s("div",O,[s("form",{onSubmit:q(U,["prevent"])},[s("div",Q,[e[8]||(e[8]=s("label",{for:"name",class:"form-label"},"Full Name",-1)),c(s("input",{type:"text",class:d(["form-control",{"is-invalid":a.value.name}]),id:"name","onUpdate:modelValue":e[0]||(e[0]=t=>o.value.name=t),onBlur:e[1]||(e[1]=t=>P())},null,34),[[p,o.value.name]]),s("div",X,i(a.value.name),1)]),s("div",Y,[e[9]||(e[9]=s("label",{for:"email",class:"form-label"},"Email Address",-1)),c(s("input",{type:"email",class:d(["form-control",{"is-invalid":a.value.email}]),id:"email","onUpdate:modelValue":e[2]||(e[2]=t=>o.value.email=t),onBlur:e[3]||(e[3]=t=>y())},null,34),[[p,o.value.email]]),s("div",ee,i(a.value.email),1)]),s("div",se,[e[11]||(e[11]=s("label",{for:"role",class:"form-label"},"How would you like to engage?",-1)),c(s("select",{class:d(["form-select",{"is-invalid":a.value.role}]),id:"role","onUpdate:modelValue":e[4]||(e[4]=t=>o.value.role=t),onBlur:_},e[10]||(e[10]=[s("option",{value:"beneficiary"},"Seeking Help (Immigrant)",-1),s("option",{value:"volunteer"},"Volunteer",-1)]),34),[[F,o.value.role]]),s("div",ae,i(a.value.role),1)]),s("div",le,[e[12]||(e[12]=s("label",{for:"password",class:"form-label"},"Password",-1)),c(s("input",{type:"password",class:d(["form-control",{"is-invalid":a.value.password}]),id:"password","onUpdate:modelValue":e[5]||(e[5]=t=>o.value.password=t),onBlur:k},null,34),[[p,o.value.password]]),s("div",oe,i(a.value.password),1),u.value.length?(h(),b("div",te,[s("div",re,[s("div",{class:d(["progress-bar",f.value]),role:"progressbar",style:T({width:w.value+"%"})},null,6)]),s("small",ne,i(B.value),1)])):x("",!0)]),s("div",ie,[e[13]||(e[13]=s("label",{for:"confirmPassword",class:"form-label"},"Confirm Password",-1)),c(s("input",{type:"password",class:d(["form-control",{"is-invalid":a.value.confirmPassword}]),id:"confirmPassword","onUpdate:modelValue":e[6]||(e[6]=t=>o.value.confirmPassword=t),onBlur:e[7]||(e[7]=t=>S())},null,34),[[p,o.value.confirmPassword]]),s("div",ue,i(a.value.confirmPassword),1)]),e[14]||(e[14]=s("button",{type:"submit",class:"btn btn-primary w-100"},"Register",-1)),v.value?(h(),b("div",de,i(v.value),1)):x("",!0)],32),s("div",ve,[e[16]||(e[16]=V(" Already have an account? ")),D(m,{to:"/login"},{default:H(()=>e[15]||(e[15]=[V("Login")])),_:1,__:[15]})])])])])])}}},pe=$(me,[["__scopeId","data-v-42e84f84"]]);export{pe as default};
