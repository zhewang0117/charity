import{_ as A,j as p,c as n,o as s,g as f,a as e,F as _,i as k,t as u,n as I,h as $,y as N,b as F,p as V,v as w,H as B}from"./index-BRLyiLg5.js";const L={class:"rating-system"},j={key:0},E={class:"stars"},O=["onClick"],T={key:1},H={key:2,class:"average-rating mt-3"},J={__name:"RatingSystem",props:{activityId:{type:[String,Number],required:!0},disabled:{type:Boolean,default:!1},averageRating:{type:Object,default:null}},emits:["submit"],setup(d,{emit:D}){const t=d,v=p({helpfulness:0,clarity:0,friendliness:0}),h=D,c=(y,l)=>{v.value[y]=l},g=()=>{h("submit",{activityId:t.activityId,ratings:{...v.value}});for(const y in v.value)v.value[y]=0};return(y,l)=>(s(),n("div",L,[d.disabled?f("",!0):(s(),n("div",j,[l[0]||(l[0]=e("h5",null,"Rate this Activity",-1)),(s(!0),n(_,null,k(v.value,(b,r)=>(s(),n("div",{key:r,class:"rating-aspect"},[e("label",null,u(r)+":",1),e("div",E,[(s(),n(_,null,k(5,i=>e("span",{key:i,onClick:a=>c(r,i),class:I({filled:i<=b})}," â˜… ",10,O)),64))])]))),128)),e("button",{onClick:g,class:"btn btn-sm btn-primary mt-2"},"Submit Ratings")])),d.disabled?(s(),n("div",T,l[1]||(l[1]=[e("p",null,"You have already rated this activity.",-1)]))):f("",!0),d.averageRating?(s(),n("div",H,[l[3]||(l[3]=e("h5",null,"Overall Average Rating",-1)),e("ul",null,[(s(!0),n(_,null,k(d.averageRating.averages,(b,r)=>(s(),n("li",{key:r},u(r)+": "+u(b.toFixed(1))+" / 5 ",1))),128))]),e("p",null,[l[2]||(l[2]=e("strong",null,"Overall Average:",-1)),$(" "+u(d.averageRating.overallAverage.toFixed(1))+" / 5",1)])])):f("",!0)]))}},M=A(J,[["__scopeId","data-v-0ec6c2ef"]]),U={class:"activity-details-page"},q={key:0},z={key:1},G={key:2},W={key:0},Y={key:1},K={class:"add-comment-form"},P={__name:"ActivityDetails",setup(d){const D=B(),t=p(null),v=p(!0),h=p(null),c=p(""),g=p(!1),y=()=>{const i=D.params.id,a=[{id:1,name:"English Class",description:"Learn English with our community.",comments:[{id:1,author:"John Doe",text:"Great class!"}],ratingsData:[]},{id:2,name:"Job Fair",description:"Find your next job opportunity.",comments:[],ratingsData:[]},{id:3,name:"Cultural Night",description:"Share and celebrate your culture.",comments:[],ratingsData:[]}];t.value=a.find(o=>o.id.toString()===i),g.value=localStorage.getItem(`rated_activity_${i}`)==="true",r(),v.value=!1},l=()=>{if(c.value.trim()){const i={id:Date.now(),author:"Current User",text:c.value};t.value.comments.push(i),c.value=""}},b=({activityId:i,ratings:a})=>{g.value||(console.log("Rating submitted for activity:",i,a),t.value&&(t.value.ratingsData||(t.value.ratingsData=[]),t.value.ratingsData.push(a),g.value=!0,localStorage.setItem(`rated_activity_${i}`,"true"),r()))},r=()=>{if(t.value&&t.value.ratingsData&&t.value.ratingsData.length>0){const i=t.value.ratingsData.length,a=t.value.ratingsData.reduce((m,S)=>{for(const C in S)m[C]=(m[C]||0)+S[C];return m},{}),o={};let x=0,R=0;for(const m in a)o[m]=a[m]/i,x+=o[m],R++;t.value.ratings={averages:o,overallAverage:R>0?x/R:0}}else t.value.ratings=null};return N(()=>{y()}),(i,a)=>(s(),n("div",U,[v.value?(s(),n("div",q,"Loading activity...")):f("",!0),h.value?(s(),n("div",z,u(h.value),1)):f("",!0),t.value?(s(),n("div",G,[e("h1",null,u(t.value.name),1),e("p",null,u(t.value.description),1),a[3]||(a[3]=e("hr",null,null,-1)),F(M,{"activity-id":t.value.id,disabled:g.value,"average-rating":t.value.ratings,onSubmit:b},null,8,["activity-id","disabled","average-rating"]),a[4]||(a[4]=e("hr",null,null,-1)),a[5]||(a[5]=e("h3",null,"Comments",-1)),t.value.comments&&t.value.comments.length?(s(),n("div",W,[(s(!0),n(_,null,k(t.value.comments,o=>(s(),n("div",{key:o.id,class:"comment-card"},[e("p",null,[e("strong",null,u(o.author),1),$(": "+u(o.text),1)])]))),128))])):(s(),n("div",Y,a[1]||(a[1]=[e("p",null,"No comments yet.",-1)]))),e("div",K,[a[2]||(a[2]=e("h4",null,"Leave a Comment",-1)),V(e("textarea",{"onUpdate:modelValue":a[0]||(a[0]=o=>c.value=o),placeholder:"Write your comment here..."},null,512),[[w,c.value]]),e("button",{onClick:l},"Submit")])])):f("",!0)]))}},X=A(P,[["__scopeId","data-v-d5f359e9"]]);export{X as default};
